<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detecting State...</title>
</head>
<body style="font-family:Arial;text-align:center;padding:40px">

<h2>üìç Detecting your location‚Ä¶</h2>
<p>Please allow location access</p>

<script>
function redirectByState(state) {
  window.location.href = "/scheme/" + state;
}

navigator.geolocation.getCurrentPosition(
  function(position) {
    const lat = position.coords.latitude;
    const lon = position.coords.longitude;

    // VERY SIMPLE INDIA STATE MAPPING (can expand)
    if (lat > 28 && lat < 29 && lon > 76 && lon < 78) {
      redirectByState("delhi_ncr");
    } else if (lat > 26 && lat < 28 && lon > 73 && lon < 76) {
      redirectByState("rajasthan");
    } else if (lat > 12 && lat < 13 && lon > 77 && lon < 78) {
      redirectByState("karnataka");
    } else if (lat > 8 && lat < 13 && lon > 76 && lon < 80) {
      redirectByState("tamil_nadu");
    } else {
      redirectByState("rajasthan"); // fallback
    }
  },
  function() {
    alert("Location permission denied. Showing default scheme.");
    redirectByState("rajasthan");
  }
);
</script>

</body>
</html>
